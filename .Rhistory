###----------------------------------------------------------------------------------
### Title - Example Run to Estimate Width
### Purpose - Example based on the provided sample data to generate a width raster
### Created On - 2025-09-05
### Last Edited On -
### Created by - Ben Robb
###----------------------------------------------------------------------------------
### Required Packages
require(dplyr)
require(sf)
require(nngeo)
#### Directories
print(paste("Starting Processing @", Sys.time()))
getwd()
### Where to write out
writeDir = paste0('~/Raster_Dir')
### Directories w/ area of interst and house features
the_dir = '~'
dir.exists(the_dir)
### Directories w/ area of interst and house features
the_dir = '~/Sample_Data'
dir.exists(the_dir)
the_dir
getwd("~")
### Directories w/ area of interst and house features
the_dir = 'Sample_Data'
getwd("~")
dir.exists(the_dir)
### Where to write out
writeDir = paste0('~/Raster_Dir')
if(!(dir.exists(writeDir))){
dir.create(writeDir)
}
dir.exists(writeDir)
writeDir
getwd()
### Where to write out
writeDir = paste0('Raster_Dir')
if(!(dir.exists(writeDir))){
dir.create(writeDir)
}
### area of interest
aoi = list.files(the_dir, full.names = TRUE)
aoi
aoi = st_read(aoi[1])
plot(aoi$geom)
### area of interest
aoi = list.files(the_dir, full.names = TRUE)
aoi
aoi = st_read(the_files[grepl("StudyExtent", the_files)])
### area of interest
the_files = list.files(the_dir, full.names = TRUE)
aoi = st_read(the_files[grepl("StudyExtent", the_files)])
aoi = st_zm(aoi)
### Gis features to calulate width between, in this case buildings
features = st_read(the_files[grepl("Buildings", the_files)])
features = st_make_valid(features)
### Run the function
print(paste("Begin processing @ ", Sys.time()))
width_fun(aoi = aoi, features = features,
max_dist = 10000,
theres = 30,
writeDir = writeDir,
n_apples = 1,
out_name = 'Width_Raster')
source("~/GitHub/WidthMetric/calculate_width_function.R")
width_fun(aoi = aoi, features = features,
max_dist = 10000,
theres = 30,
writeDir = writeDir,
n_apples = 1,
out_name = 'Width_Raster')
install.packages("lwgeom")
### The width function
source("~/GitHub/WidthMetric/calculate_width_function.R")
width_fun(aoi = aoi, features = features,
max_dist = 10000,
theres = 30,
writeDir = writeDir,
n_apples = 1,
out_name = 'Width_Raster')
